(this.webpackJsonpcorona=this.webpackJsonpcorona||[]).push([[2],{222:function(e,t,r){var n=r(88);Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithCommas=function(e,t){var r=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(t&&e>999){var n="";return e<2e3&&r.length>4&&"000"!==r.slice(-3)&&(n=".".concat(r.slice(-3)[0])),"".concat(r.slice(0,r.length-4)).concat(n,"K")}return r},t.V=t.L=t.Box=t.colors=t.format=t.generateBarData=t.chartList=void 0;var a=n(r(0)),o=r(127);t.chartList={Cases:"confirmed","Active cases":"active",Recovered:"recovered",Deaths:"deaths","Population infected":"precentage"};t.generateBarData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirmed",r=e.sort((function(e,r){return r[t]-e[t]})).slice(0,9),n=r.map((function(e){return e.country})),a=r.map((function(e){return e[t]})),o={labels:n,datasets:[{label:"Cases per country",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:a}]};return o};t.format=function(e){return e<10?"0".concat(e):e};t.colors=["#ff0029","#377eb8","#7f80cd","#66a61e","#984ea3","#00d2d5","#ff7f00","#af8d00","#b3e900","#fec254","#ccebc5","#a63603","#016c59","#e7298a","#c994c7","#dfdf00","#df00df","#80ff80"];var c=(0,a.memo)((function(e){var t=e.children,r=e.style;return a.default.createElement(o.View,{style:[{margin:10,padding:10,width:"80%"},r]},t)}));t.Box=c;var i=(0,a.memo)((function(e){var t=e.t;return a.default.createElement(o.Text,{style:{color:"#ddd"}},t)}));t.L=i;var s=(0,a.memo)((function(e){var t=e.t;return a.default.createElement(o.Text,{style:{color:"#fff"}},t)}));t.V=s},223:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(224).createState)({lastUpdated:null,search:""});t.default=n},231:function(e,t,r){e.exports=r(232)},232:function(e,t,r){var n=r(88),a=r(89),o=a(r(0)),c=a(r(31));r(237);var i=a(r(238)),s=n(r(471));c.default.render(o.default.createElement(i.default,null),document.getElementById("root")),s.register()},237:function(e,t,r){},238:function(e,t,r){var n=r(88),a=r(89);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(227)),c=a(r(128)),i=n(r(0)),s=r(127),u=r(225),l=r(222),f=a(r(223));function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var p=i.default.lazy((function(){return Promise.all([r.e(0),r.e(6)]).then(r.t.bind(null,472,7))})),v=i.default.lazy((function(){return r.e(7).then(r.t.bind(null,473,7))})),h=new(r(258)),m={US:"United States",Iran:"Iran, Islamic Rep.",Russia:"Russian Federation","Korea, South":"Korea, Rep.",Czechia:"Czech Republic",Egypt:"Egypt, Arab Rep.",Slovakia:"Slovak Republic",Kyrgyzstan:"Kyrgyz Republic",Venezuela:"Venezuela, RB",Brunei:"Brunei Darussalam",Gambia:"Gambia, The"},b=function(e,t,r){var n=e.countries.map((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{active:e.confirmed-(e.recovered+e.deaths)}),n=r.records.filter((function(t){var r=t.fields.country_name;return r.toLowerCase()===e.country.toLowerCase()||r===m[e.country]}));if(!n.length)return t;var a=n.sort((function(e,t){return t.fields.year-e.fields.year}))[0];if(!a||!a.fields.value)return t;t.population=a.fields.value;var o=(e.confirmed/a.fields.value*100).toFixed(2);return o+""!=="0.00"&&(t.precentage=o),t})).sort((function(e,t){return t.confirmed-e.confirmed}));f.default.setState({lastUpdated:new Date(e.date.replace(/-/g,"/")),allCases:(0,l.numberWithCommas)(e.confirmed),allDeaths:(0,l.numberWithCommas)(e.deaths),allRecovered:(0,l.numberWithCommas)(e.recovered),countries:n,filteredCountries:n,time:t});var a=(0,l.generateBarData)(n.slice(0));f.default.setState({chartData:a});var o=function(e){var t={labels:[],datasets:[]};return e.forEach((function(e,r){var n=e.locations[0].dates.map((function(t,r){var n=0,a=Object.keys(t)[0];return e.locations.forEach((function(e){n+=e.dates[r][a]})),{y:a,x:n}}));t.labels.length<1&&(t.labels=n.map((function(e){var t=new Date(e.y.replace(/-/g,"/")),r=t.getDate(),n=t.getMonth()+1;return"".concat((0,l.format)(r),".").concat((0,l.format)(n))}))),t.datasets.push({label:e.country.slice(0),borderColor:l.colors[r].slice(0),fill:!1,borderWidth:1,data:n.map((function(e){return e.x}))})})),t}(t.countries.sort((function(e,t){var r=0,n=0;return e.locations.forEach((function(e){r+=e.total})),t.locations.forEach((function(e){n+=e.total})),n-r})).slice(0,10));f.default.setState({lineChartData:o})};Promise.all([h.getData(),h.getTimeSeriesData("confirmed"),fetch("https://data.opendatasoft.com/api/records/1.0/search/?dataset=world-population%40kapsarc&rows=10000&sort=year&facet=year&facet=country_name").then((function(e){return e.json()}))]).then((function(e){var t=(0,o.default)(e,3),r=t[0],n=t[1],a=t[2];console.log("--\xaf_(\u30c4)_/\xaf-----------d----------",r),console.log("--\xaf_(\u30c4)_/\xaf-----------time----------",n),console.log("--\xaf_(\u30c4)_/\xaf-----------j----------",a),b(r,n,a)}));var g=s.StyleSheet.create({container:{backgroundColor:"#222222",alignItems:"center",minHeight:"100%",width:"100%"},title:{color:"#fff",fontWeight:"bold",fontSize:16}}),y=(0,i.memo)((function(){return i.default.createElement(u.BrowserRouter,{basename:"/corona"},i.default.createElement(s.ScrollView,{contentContainerStyle:g.container},i.default.createElement(s.View,{style:g.container},i.default.createElement(s.Text,{accessibilityRole:"link",target:"_blank",href:"https://github.com/CSSEGISandData/COVID-19",style:[g.title,{color:"#aaa",padding:10,width:"100%",textAlign:"center"}]},"COVID-19 data provided by Johns Hopkins CSSE"),i.default.createElement(i.Suspense,{fallback:i.default.createElement(s.ActivityIndicator,{size:"large",style:{marginTop:40,alignSelf:"center"}})},i.default.createElement(u.Switch,null,i.default.createElement(u.Route,{path:"/country/:country"},i.default.createElement(p,null)),i.default.createElement(u.Route,{path:"/"},i.default.createElement(v,null)),i.default.createElement(u.Redirect,{to:"/"}))))))}));t.default=y},258:function(e,t,r){var n=r(89);Object.defineProperty(t,"__esModule",{value:!0}),t.d=void 0;var a=n(r(128)),o=n(r(259)),c=n(r(261)),i=n(r(228)),s=n(r(229)),u=r(230),l=r(262),f=r(470),d={};t.d=d;var p=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,[{key:"getData",value:function(){var e=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},void 0==t){e.next=8;break}return t=u(t,"MM-DD-YYYY").format("MM-DD-YYYY"),e.next=5,this.fetchData(t);case 5:r=e.sent,e.next=12;break;case 8:return t=u().format("MM-DD-YYYY"),e.next=11,this.fetchData(t);case 11:r=e.sent;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTimeSeriesData",value:function(){var e=(0,c.default)(o.default.mark((function e(t){var r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n=u().format("MM-DD-YYYY"),t=t.toLowerCase(),!(void 0===(r=d[t])||r&&r.lastUpdated!==n)){e.next=8;break}return e.next=7,this.addRemoteTimesSeries(t);case 7:r=d[t];case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},r=d[t];case 2:if(!(void 0===r&&u(t,"MM-DD-YYYY")>=u("01-22-2020","MM-DD-YYYY"))){e.next=15;break}return e.next=5,this.addRemoteDailyReports(t);case 5:if(void 0!=(r=d[t])){e.next=13;break}if(t=u(t,"MM-DD-YYYY").subtract(1,"days").format("MM-DD-YYYY"),void 0!==(r=d[t])){e.next=13;break}return e.next=12,this.addRemoteDailyReports(t);case 12:r=d[t];case 13:e.next=2;break;case 15:return void 0===r&&(r={error:"Data not found. Plase try again."}),e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addRemoteDailyReports",value:function(){var e=(0,c.default)(o.default.mark((function e(t){var r,n=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,f().fromStream(l.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/".concat(t,".csv"))).subscribe(function(){var e=(0,c.default)(o.default.mark((function e(n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var o={};o=u(t,"MM-DD-YYYY")<=u("03-22-2020","MM-DD-YYYY")?{country:n["Country/Region"]||"",state:n["Province/State"]||"",lat:n.Latitude||"0.0",lon:n.Longitude||"0.0",lastUpdate:n["Last Update"]||"",confirmed:parseInt(n.Confirmed)||0,deaths:parseInt(n.Deaths)||0,recovered:parseInt(n.Recovered)||0}:{country:n.Country_Region||"",state:n.Province_State||"",lat:n.Lat||"0.0",lon:n.Long_||"0.0",lastUpdate:n.Last_Update||"",confirmed:parseInt(n.Confirmed)||0,deaths:parseInt(n.Deaths)||0,recovered:parseInt(n.Recovered)||0},r.push(o),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,c.default)(o.default.mark((function e(a){var c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>0)){e.next=6;break}return e.next=3,n.groupBy("country",r,t);case 3:c=e.sent,delete d[t],d[t]=c;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"groupBy",value:function(){var e=(0,c.default)(o.default.mark((function e(t,r,n){var a,c,i,s,u,l,f,d,p,v,h,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,s=0,u=0,l=0,f=0,d=0,(a={}).countries=c=[],p=0;case 10:if(!(p<r.length)){e.next=37;break}v=!1,i=0,s=0,u=0,l+=parseInt(r[p].confirmed),f+=parseInt(r[p].recovered),d+=parseInt(r[p].deaths),h=0;case 19:if(!(h<c.length)){e.next=33;break}if(c[h][t]!=r[p][t]){e.next=30;break}return i+=parseInt(r[p].confirmed),c[h].confirmed=i+parseInt(c[h].confirmed),s+=parseInt(r[p].recovered),c[h].recovered=s+parseInt(c[h].recovered),u+=parseInt(r[p].deaths),c[h].deaths=u+parseInt(c[h].deaths),c[h].locations.push(r[p]),v=!0,e.abrupt("break",33);case 30:h++,e.next=19;break;case 33:v||(i=0,s=0,u=0,m={locations:[]},i+=parseInt(r[p].confirmed),m.confirmed=i,s+=parseInt(r[p].recovered),m.recovered=s,u+=parseInt(r[p].deaths),m.deaths=u,m[t]=r[p][t],m.lat=r[p].lat,m.lon=r[p].lon,m.locations.push(r[p]),c.push(m));case 34:p++,e.next=10;break;case 37:return a.date=n,a.confirmed=l,a.recovered=f,a.deaths=d,e.abrupt("return",a);case 42:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"addRemoteTimesSeries",value:function(){var e=(0,c.default)(o.default.mark((function e(t){var r,n,i,s=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n=u("2020-03-11"),i=u(),e.next=5,f().fromStream(l.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_".concat(t,"_global.csv"))).subscribe(function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){for(var c={country:t["Country/Region"]||"",state:t["Province/State"]||"",lat:t.Lat||"0.0",lon:t.Long||"0.0"},s=[],l=u(n);l.diff(i,"days")<=0;l.add(1,"days")){var f=l.format("M/D/YY");if(void 0!=t[f]){var d=parseInt(t[f])||0,p=(0,a.default)({},l.format("MM-DD-YYYY"),d);s.push(p)}}if(s.length>0){var v=s[s.length-1];c.total=Object.values(v)[0]}c.dates=s,r.push(c),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,c.default)(o.default.mark((function e(n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>0)){e.next=6;break}return e.next=3,s.groupByTimesSeries("country",r);case 3:r=e.sent,delete d[t],d[t]=r;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"groupByTimesSeries",value:function(){var e=(0,c.default)(o.default.mark((function e(t,r){var n,a,c,i,s,l,f,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0,(n={}).countries=a=[],i=0;case 5:if(!(i<r.length)){e.next=24;break}s=0,l=!1,f=0;case 9:if(!(f<a.length)){e.next=18;break}if(a[f][t]!=r[i][t]){e.next=15;break}return s+=parseInt(r[i].total)||0,a[f].locations.push(r[i]),l=!0,e.abrupt("break",18);case 15:f++,e.next=9;break;case 18:l||((d={locations:[]})[t]=r[i][t],d.lat=r[i].lat,d.lon=r[i].lon,s+=parseInt(r[i].total)||0,d.locations.push(r[i]),a.push(d)),a[f].total=s,c+=s;case 21:i++,e.next=5;break;case 24:return n.lastUpdated=u().format("MM-DD-YYYY"),n.total=c,e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();e.exports=p},277:function(e,t){},279:function(e,t){},309:function(e,t){},310:function(e,t){},354:function(e,t){},356:function(e,t){},379:function(e,t){},471:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(e){if("serviceWorker"in navigator){if(new URL("/corona",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/corona","/service-worker.js");n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):a(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):a(t,e)}))}},t.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))};var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}}},[[231,3,4]]]);
//# sourceMappingURL=main.5da0b4c8.chunk.js.map