(this.webpackJsonpcorona=this.webpackJsonpcorona||[]).push([[2],{128:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.chartState=t.countryState=t.searchState=t.timeState=void 0;var a=r(225),n=(0,a.createState)({lastUpdated:null}),o=(0,a.createState)({});t.timeState=o;var c=(0,a.createState)({search:""});t.searchState=c;var i=(0,a.createState)({});t.countryState=i;var s=(0,a.createState)({});t.chartState=s;var u=n;t.default=u},129:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.black=t.white=void 0;t.white="#f5f5f5";t.black="#222222"},224:function(e,t,r){var a=r(73);Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithCommas=function(e,t){var r=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(t&&e>999){var a="";return e<2e3&&r.length>4&&"000"!==r.slice(-3)&&(a=".".concat(r.slice(-3)[0])),"".concat(r.slice(0,r.length-4)).concat(a,"K")}return r},t.V=t.L=t.Box=t.colors=t.format=t.generateBarData=t.chartList=void 0;var n=a(r(0)),o=r(127),c=r(129);t.chartList={Cases:"confirmed","Active cases":"active",Recovered:"recovered",Deaths:"deaths","Population infected":"precentage"};t.generateBarData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirmed",r=e.sort((function(e,r){return r[t]-e[t]})).slice(0,9),a=r.map((function(e){return e.country})),n=r.map((function(e){return e[t]})),o={labels:a,datasets:[{label:"Cases per country",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:n}]};return o};t.format=function(e){return e<10?"0".concat(e):e};t.colors=["#ff0029","#377eb8","#7f80cd","#66a61e","#984ea3","#00d2d5","#ff7f00","#af8d00","#b3e900","#fec254","#ccebc5","#a63603","#016c59","#e7298a","#c994c7","#dfdf00","#df00df","#80ff80"];var i=(0,n.memo)((function(e){var t=e.children,r=e.style;return n.default.createElement(o.View,{style:[{width:"90%"},r]},t)}));t.Box=i;var s=(0,n.memo)((function(e){var t=e.t;return n.default.createElement(o.Text,{style:{color:"#ddd"}},t)}));t.L=s;var u=(0,n.memo)((function(e){var t=e.t;return n.default.createElement(o.Text,{style:{color:c.white}},t)}));t.V=u},230:function(e,t,r){e.exports=r(231)},231:function(e,t,r){var a=r(73),n=r(89),o=n(r(226)),c=n(r(0)),i=n(r(31));r(239);var s=n(r(240)),u=a(r(256)),l=r(257),f=r(470),d=r(128),p=localStorage.getItem("d");(p=p&&JSON.parse(p))&&p.j&&p.d?(console.log("--\xaf_(\u30c4)_/\xaf---------parsing local storage data----------"),(0,f.parseData)(p.d,p.j)):window.__j__&&window.__d__&&(console.log("--\xaf_(\u30c4)_/\xaf---------parsing old data----------"),(0,f.parseData)(window.__d__,window.__j__)),Promise.all([(0,l.getData)(),fetch("https://data.opendatasoft.com/api/records/1.0/search/?dataset=world-population%40kapsarc&rows=10000&sort=year&facet=year&facet=country_name").then((function(e){return e.json()}))]).then((function(e){var t=(0,o.default)(e,2),r=t[0],a=t[1];console.log("--\xaf_(\u30c4)_/\xaf-----------d----------",r),console.log("--\xaf_(\u30c4)_/\xaf-----------j----------",a),(0,f.parseData)(r,a),localStorage.setItem("d",JSON.stringify({d:r,j:a}))})),(0,l.getTimeSeriesData)("confirmed").then(f.parseTimeData),(0,l.getTimeSeriesData)("deaths").then((function(e){console.log("--\xaf_(\u30c4)_/\xaf-----------deaths----------",e),d.countryState.setState({deaths:e})})),(0,l.getTimeSeriesData)("recovered").then((function(e){console.log("--\xaf_(\u30c4)_/\xaf-----------recovered----------",e),d.countryState.setState({recovered:e})})),i.default.createRoot(document.getElementById("root")).render(c.default.createElement(s.default,null)),u.register()},239:function(e,t,r){},240:function(e,t,r){var a=r(73);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(0)),o=r(127),c=r(227),i=r(129),s=n.default.lazy((function(){return Promise.all([r.e(0),r.e(7)]).then(r.t.bind(null,472,7))})),u=n.default.lazy((function(){return r.e(6).then(r.t.bind(null,473,7))})),l=o.StyleSheet.create({container:{backgroundColor:i.black,alignItems:"center",minHeight:"100%",width:"100%"},title:{color:i.white,fontWeight:"bold",fontSize:16}}),f=(0,n.memo)((function(){return n.default.createElement(c.BrowserRouter,{basename:"/corona"},n.default.createElement(o.ScrollView,{contentContainerStyle:l.container},n.default.createElement(o.View,{style:l.container},n.default.createElement(o.Text,{accessibilityRole:"link",target:"_blank",href:"https://github.com/CSSEGISandData/COVID-19",style:[l.title,{color:"#aaa",padding:10,width:"100%",textAlign:"center"}]},"COVID-19 data provided by Johns Hopkins CSSE"),n.default.createElement(n.Suspense,{fallback:n.default.createElement(o.ActivityIndicator,{size:"large",style:{marginTop:40,alignSelf:"center"}})},n.default.createElement(c.Switch,null,n.default.createElement(c.Route,{path:"/country/:country"},n.default.createElement(s,null)),n.default.createElement(c.Route,{path:"/"},n.default.createElement(u,null)),n.default.createElement(c.Redirect,{to:"/"}))))))}));t.default=f},256:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(e){if("serviceWorker"in navigator){if(new URL("/corona",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/corona","/service-worker.js");a?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var a=r.headers.get("content-type");404===r.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):n(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):n(t,e)}))}},t.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))};var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},257:function(e,t,r){var a=r(89);Object.defineProperty(t,"__esModule",{value:!0}),t.getData=f,t.getTimeSeriesData=function(e){return p.apply(this,arguments)},t.fetchData=h,t.addRemoteDailyReports=m,t.groupBy=b,t.addRemoteTimesSeries=w,t.groupByTimesSeries=_,t.d=void 0;var n=a(r(130)),o=a(r(258)),c=a(r(260)),i=r(229),s=r(261),u=r(469),l={};function f(e){return d.apply(this,arguments)}function d(){return(d=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},void 0==t){e.next=8;break}return t=i(t,"MM-DD-YYYY").format("MM-DD-YYYY"),e.next=5,h(t);case 5:r=e.sent,e.next=12;break;case 8:return t=i().format("MM-DD-YYYY"),e.next=11,h(t);case 11:r=e.sent;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,c.default)(o.default.mark((function e(t){var r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},a=i().format("MM-DD-YYYY"),t=t.toLowerCase(),!(void 0===(r=l[t])||r&&r.lastUpdated!==a)){e.next=8;break}return e.next=7,w(t);case 7:r=l[t];case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},r=l[t];case 2:if(!(void 0===r&&i(t,"MM-DD-YYYY")>=i("01-22-2020","MM-DD-YYYY"))){e.next=15;break}return e.next=5,m(t);case 5:if(void 0!=(r=l[t])){e.next=13;break}if(t=i(t,"MM-DD-YYYY").subtract(1,"days").format("MM-DD-YYYY"),void 0!==(r=l[t])){e.next=13;break}return e.next=12,m(t);case 12:r=l[t];case 13:e.next=2;break;case 15:return void 0===r&&(r={error:"Data not found. Plase try again."}),e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,u().fromStream(s.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/".concat(t,".csv"))).subscribe(function(){var e=(0,c.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var o={};o=i(t,"MM-DD-YYYY")<=i("03-22-2020","MM-DD-YYYY")?{country:a["Country/Region"]||"",state:a["Province/State"]||"",lat:a.Latitude||"0.0",lon:a.Longitude||"0.0",lastUpdate:a["Last Update"]||"",confirmed:parseInt(a.Confirmed)||0,deaths:parseInt(a.Deaths)||0,recovered:parseInt(a.Recovered)||0}:{country:a.Country_Region||"",state:a.Province_State||"",lat:a.Lat||"0.0",lon:a.Long_||"0.0",lastUpdate:a.Last_Update||"",confirmed:parseInt(a.Confirmed)||0,deaths:parseInt(a.Deaths)||0,recovered:parseInt(a.Recovered)||0},r.push(o),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,c.default)(o.default.mark((function e(a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>0)){e.next=6;break}return e.next=3,b("country",r,t);case 3:n=e.sent,delete l[t],l[t]=n;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,r){return y.apply(this,arguments)}function y(){return(y=(0,c.default)(o.default.mark((function e(t,r,a){var n,c,i,s,u,l,f,d,p,h,v,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,s=0,u=0,l=0,f=0,d=0,(n={}).countries=c=[],p=0;case 10:if(!(p<r.length)){e.next=37;break}h=!1,i=0,s=0,u=0,l+=parseInt(r[p].confirmed),f+=parseInt(r[p].recovered),d+=parseInt(r[p].deaths),v=0;case 19:if(!(v<c.length)){e.next=33;break}if(c[v][t]!=r[p][t]){e.next=30;break}return i+=parseInt(r[p].confirmed),c[v].confirmed=i+parseInt(c[v].confirmed),s+=parseInt(r[p].recovered),c[v].recovered=s+parseInt(c[v].recovered),u+=parseInt(r[p].deaths),c[v].deaths=u+parseInt(c[v].deaths),c[v].locations.push(r[p]),h=!0,e.abrupt("break",33);case 30:v++,e.next=19;break;case 33:h||(i=0,s=0,u=0,m={locations:[]},i+=parseInt(r[p].confirmed),m.confirmed=i,s+=parseInt(r[p].recovered),m.recovered=s,u+=parseInt(r[p].deaths),m.deaths=u,m[t]=r[p][t],m.lat=r[p].lat,m.lon=r[p].lon,m.locations.push(r[p]),c.push(m));case 34:p++,e.next=10;break;case 37:return n.date=a,n.confirmed=l,n.recovered=f,n.deaths=d,e.abrupt("return",n);case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return S.apply(this,arguments)}function S(){return(S=(0,c.default)(o.default.mark((function e(t){var r,a,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=i("2020-03-11"),f=i(),e.next=5,u().fromStream(s.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_".concat(t,"_global.csv"))).subscribe(function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){for(var c={country:t["Country/Region"]||"",state:t["Province/State"]||"",lat:t.Lat||"0.0",lon:t.Long||"0.0"},s=[],u=i(a);u.diff(f,"days")<=0;u.add(1,"days")){var l=u.format("M/D/YY");if(void 0!=t[l]){var d=parseInt(t[l])||0,p=(0,n.default)({},u.format("MM-DD-YYYY"),d);s.push(p)}}if(s.length>0){var h=s[s.length-1];c.total=Object.values(h)[0]}c.dates=s,r.push(c),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,c.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>0)){e.next=6;break}return e.next=3,_("country",r);case 3:r=e.sent,delete l[t],l[t]=r;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return D.apply(this,arguments)}function D(){return(D=(0,c.default)(o.default.mark((function e(t,r){var a,n,c,s,u,l,f,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0,(a={}).countries=n=[],s=0;case 5:if(!(s<r.length)){e.next=24;break}u=0,l=!1,f=0;case 9:if(!(f<n.length)){e.next=18;break}if(n[f][t]!=r[s][t]){e.next=15;break}return u+=parseInt(r[s].total)||0,n[f].locations.push(r[s]),l=!0,e.abrupt("break",18);case 15:f++,e.next=9;break;case 18:l||((d={locations:[]})[t]=r[s][t],d.lat=r[s].lat,d.lon=r[s].lon,u+=parseInt(r[s].total)||0,d.locations.push(r[s]),n.push(d)),n[f].total=u,c+=u;case 21:s++,e.next=5;break;case 24:return a.lastUpdated=i().format("MM-DD-YYYY"),a.total=c,e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.d=l,f()},276:function(e,t){},278:function(e,t){},308:function(e,t){},309:function(e,t){},353:function(e,t){},355:function(e,t){},378:function(e,t){},470:function(e,t,r){var a=r(73),n=r(89);Object.defineProperty(t,"__esModule",{value:!0}),t.parseData=t.parseTimeData=void 0;var o=n(r(130)),c=r(224),i=a(r(128));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var u={US:"United States",Iran:"Iran, Islamic Rep.",Russia:"Russian Federation","Korea, South":"Korea, Rep.",Czechia:"Czech Republic",Egypt:"Egypt, Arab Rep.",Slovakia:"Slovak Republic",Kyrgyzstan:"Kyrgyz Republic",Venezuela:"Venezuela, RB",Brunei:"Brunei Darussalam",Gambia:"Gambia, The"};t.parseTimeData=function(e){console.log("--\xaf_(\u30c4)_/\xaf-----------time----------",e);var t=function(e){var t={labels:[],datasets:[]};return e.forEach((function(e,r){var a=e.locations[0].dates.map((function(t,r){var a=0,n=Object.keys(t)[0];return e.locations.forEach((function(e){a+=e.dates[r][n]})),{y:n,x:a}}));t.labels.length<1&&(t.labels=a.map((function(e){var t=new Date(e.y.replace(/-/g,"/")),r=t.getDate(),a=t.getMonth()+1;return"".concat((0,c.format)(r),".").concat((0,c.format)(a))}))),t.datasets.push({label:e.country,borderColor:c.colors[r],fill:!1,borderWidth:1,data:a.map((function(e){return e.x}))})})),t}(function(e){return e.countries.sort((function(e,t){var r=0,a=0;return e.locations.forEach((function(e){r+=e.total})),t.locations.forEach((function(e){a+=e.total})),a-r}))}(e).slice(0,10));i.timeState.setState({lineChartData:t,time:e})};t.parseData=function(e,t){var r=e.countries.map((function(e){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{active:e.confirmed-(e.recovered+e.deaths)}),a=t.records.filter((function(t){var r=t.fields.country_name;return r.toLowerCase()===e.country.toLowerCase()||r===u[e.country]}));if(!a.length)return r;var n=a.sort((function(e,t){return t.fields.year-e.fields.year}))[0];if(!n||!n.fields.value)return r;r.population=n.fields.value;var c=(e.confirmed/n.fields.value*100).toFixed(2);return c+""!=="0.00"&&(r.precentage=c),r})).sort((function(e,t){return t.confirmed-e.confirmed}));i.default.setState({lastUpdated:new Date(e.date.replace(/-/g,"/")),allCases:(0,c.numberWithCommas)(e.confirmed),allDeaths:(0,c.numberWithCommas)(e.deaths),allRecovered:(0,c.numberWithCommas)(e.recovered),countries:r}),i.searchState.setState({filteredCountries:r});var a=(0,c.generateBarData)(r.slice(0));i.chartState.setState({chartData:a})}}},[[230,3,4]]]);
//# sourceMappingURL=main.d927554c.chunk.js.map